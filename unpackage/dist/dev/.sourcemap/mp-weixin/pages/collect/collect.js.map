{"version":3,"file":"collect.js","sources":["pages/collect/collect.vue","D:/浏览器下载/HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY29sbGVjdC9jb2xsZWN0LnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"container\">\n    <!-- 顶部标题栏 -->\n    <view class=\"header\">\n      <text class=\"title\">玉米叶片采集</text>\n      <view class=\"connection-status\">\n        <text>{{ locationStatus }}</text>\n      </view>\n    </view>\n    <!-- 相机预览区域 -->\n    <view class=\"camera-container\" v-if=\"showCamera\">\n      <camera \n        class=\"camera\" \n        device-position=\"back\" \n        flash=\"off\"\n        style=\"height: 70vh;\"\n      ></camera>\n      <!-- 九宫格辅助线 -->\n      <view class=\"grid-overlay\">\n        <view class=\"grid-line vertical-line-1\"></view>\n        <view class=\"grid-line vertical-line-2\"></view>\n        <view class=\"grid-line horizontal-line-1\"></view>\n        <view class=\"grid-line horizontal-line-2\"></view>\n      </view>\n    </view>\n    <!-- 照片预览区域 -->\n    <view class=\"preview-container\" v-if=\"!showCamera && imageSrc\">\n      <image :src=\"imageSrc\" class=\"preview-image\" mode=\"aspectFill\" />\n      <view class=\"oss-url\" v-if=\"ossUrl\">\n        <text>OSS URL: {{ ossUrl }}</text>\n      </view>\n      <view class=\"upload-status\" v-if=\"uploadStatus\">\n        <text>{{ uploadStatus }}</text>\n      </view>\n    </view>\n    <!-- 操作按钮区域 -->\n    <view class=\"button-area\">\n      <!-- 相机模式下的按钮 -->\n      <template v-if=\"showCamera\">\n        <button class=\"action-btn capture\" @click=\"takePhoto\">拍照</button>\n        <button class=\"action-btn cancel\" @click=\"cancelCamera\">返回</button>\n      </template>\n      <!-- 预览模式下的按钮 -->\n      <template v-if=\"!showCamera && imageSrc\">\n        <view class=\"form-container\">\n          <view class=\"form-item\">\n            <text class=\"label\">经度：</text>\n            <input class=\"input\" v-model=\"longitude\" placeholder=\"请输入经度\" readonly />\n          </view>\n          <view class=\"form-item\">\n            <text class=\"label\">纬度：</text>\n            <input class=\"input\" v-model=\"latitude\" placeholder=\"请输入纬度\" readonly />\n          </view>\n          <view class=\"form-item\">\n            <text class=\"label\">图片编号：</text>\n            <input class=\"input\" v-model=\"imgId\" placeholder=\"自动生成\" readonly />\n          </view>\n          <view class=\"form-item\">\n            <text class=\"label\">样品编号：</text>\n            <input class=\"input\" v-model=\"sampleId\" placeholder=\"请输入样品编号\" />\n          </view>\n          <view class=\"form-item\">\n            <text class=\"label\">病害类型：</text>\n            <picker \n              class=\"picker\"\n              mode=\"selector\" \n              :range=\"diseaseTypes\"\n              @change=\"onDiseaseChange\"\n            >\n              <view class=\"picker-text\">\n                {{ diseaseTypes[diseaseIndex] || '请选择病害类型' }}\n              </view>\n            </picker>\n          </view>\n          <view class=\"form-item\">\n            <text class=\"label\">病害等级：</text>\n            <input \n              class=\"input\" \n              v-model=\"diseaseLevel\" \n              placeholder=\"请输入病害等级(1-9)\" \n              type=\"number\"\n              max=\"9\"\n              min=\"1\"\n            />\n          </view>\n          <view class=\"form-item\">\n            <text class=\"label\">备注：</text>\n            <input class=\"input\" v-model=\"remark\" placeholder=\"请输入备注信息\" />\n          </view>\n        </view>\n        <button class=\"action-btn confirm\" @click=\"confirmImage\">确认上传</button>\n        <button class=\"action-btn retake\" @click=\"retakePhoto\">重新拍摄</button>\n      </template>\n      <!-- 初始状态下的按钮 -->\n      <template v-if=\"!showCamera && !imageSrc\">\n        <button class=\"action-btn capture\" @click=\"startCamera\">调用相机拍摄</button>\n        <button class=\"action-btn album\" @click=\"chooseFromAlbum\">从图库上传</button>\n      </template>\n    </view>\n  </view>\n</template>\n\n<script>\nimport CustomTabBar from '@/components/tabBar/tabBar.vue'\nimport { request } from '../../components/request'\nexport default {\n  data() {\n    return {\n      showCamera: false,\n      imageSrc: '',\n      ossUrl: '',\n      uploadStatus: '',\n      taskId: '',\n      locationStatus: '正在获取定位...',\n      longitude: '114.1',\n      latitude: '30.2',\n      diseaseTypes: ['黄叶病', '锈斑病', '其他'],\n      diseaseIndex: 0,\n      diseaseLevel: '',\n      imgId: '',\n      sampleId: '', // 新增样品编号字段\n      remark: '',   // 备注字段\n      uploadedImageUrls: [], // 存储上传的图片URL\n      blockNum: '', // 小区编号\n      imageCounter: 1, // 图片计数器\n      blockId: '' // 小区ID\n    };\n  },\n  onLoad(options) {\n    this.taskId = options.taskId || '';\n    this.getLocation();\n    this.initImageId();\n  },\n  methods: {\n    startCamera() {\n      this.showCamera = true;\n      this.imageSrc = '';\n      this.ossUrl = '';\n      this.uploadStatus = '';\n    },\n    \n    takePhoto() {\n      const ctx = uni.createCameraContext();\n      ctx.takePhoto({\n        quality: 'high',\n        success: (res) => {\n          this.imageSrc = res.tempImagePath;\n          this.showCamera = false;\n          this.getLocation();\n        },\n        fail: (err) => {\n          console.error('拍照失败:', err);\n          uni.showToast({ title: '拍照失败，请重试', icon: 'none' });\n        }\n      });\n    },\n    \n    cancelCamera() {\n      this.showCamera = false;\n      uni.navigateBack();\n    },\n    \n    retakePhoto() {\n      this.startCamera();\n    },\n    \n    getLocation() {\n      this.locationStatus = '正在获取定位...';\n      uni.getLocation({\n        type: 'wgs84',\n        altitude: true,\n        success: (res) => {\n          this.longitude = res.longitude.toFixed(6);\n          this.latitude = res.latitude.toFixed(6);\n          this.locationStatus = '定位成功';\n        },\n        fail: (err) => {\n          console.error('获取定位失败:', err);\n          this.locationStatus = '定位失败';\n          this.longitude = '114.353280';\n          this.latitude = '30.477193';\n          this.remark = '无';\n        }\n      });\n    },\n    \n    onDiseaseChange(e) {\n      const selectedIndex = e.detail.value;\n      if (selectedIndex >= 0 && selectedIndex < this.diseaseTypes.length) {\n        this.diseaseIndex = selectedIndex;\n      } else {\n        console.warn('无效的病害类型选择:', selectedIndex);\n        this.diseaseIndex = 0;\n      }\n    },\n    \n    chooseFromAlbum() {\n      uni.chooseImage({\n        count: 1,\n        success: (res) => {\n          this.imageSrc = res.tempFilePaths[0];\n          this.initImageId();\n          this.getLocation();\n        }\n      });\n    },\n    \n    // 初始化图片编号\n    initImageId() {\n      // 从本地存储获取正确的blockId和blockNum\n      this.blockId = uni.getStorageSync('blockId') || '';\n      this.blockNum = uni.getStorageSync('blockNum') || 'unknown';\n      \n      if (!this.blockNum || this.blockNum === 'unknown') {\n        this.imgId = 'unknown_001';\n        return;\n      }\n      \n      // 从本地存储获取当前小区的图片计数器\n      const counterKey = `imageCounter_${this.blockNum}`;\n      this.imageCounter = uni.getStorageSync(counterKey) || 1;\n      \n      // 生成图片编号\n      this.imgId = `${this.blockNum}_${this.imageCounter.toString().padStart(3, '0')}`;\n    },\n    \n    // 确认上传图片\n    async confirmImage() {\n      if (!this.validateForm()) return;\n      \n      try {\n        uni.showLoading({ title: '上传数据中...', mask: true });\n        \n        const token = uni.getStorageSync('token') || '';\n        console.log('【调试】token:', token);\n        \n        const branchTaskId = uni.getStorageSync('branchTaskId');\n        console.log('【调试】branchTaskId:', branchTaskId);\n        \n        // 修正blockId的获取键名\n        this.blockId = uni.getStorageSync('blockId') || '';\n        console.log('【调试】blockId:', this.blockId);\n        \n        const blockName = uni.getStorageSync('blockName');\n        console.log('【调试】blockName:', blockName);\n        \n        // 拼接样品编号和备注\n        const combinedRemark = `${this.sampleId || ''}#${this.remark || ''}`;\n        \n        // 1. 使用uni.uploadFile上传图片到远程服务器\n        const uploadPicRes = await uni.uploadFile({\n          url: 'https://larsc.hzau.edu.cn/prod-api/plant-disease/uploadPic',\n          filePath: this.imageSrc,\n          name: 'file',\n          header: {\n            'Authorization': token\n          }\n        });\n        console.log('【调试】uploadPicRes原始响应:', uploadPicRes);\n        \n        if (uploadPicRes.statusCode !== 200) {\n          throw new Error(`上传图片失败，状态码: ${uploadPicRes.statusCode}`);\n        }\n        try {\n          let uploadPicData = {};\n          \n          // 尝试解析响应（支持不同格式的响应）\n          try {\n            uploadPicData = JSON.parse(uploadPicRes.data);\n          } catch (parseErr) {\n            // 如果解析JSON失败，尝试其他方式提取URL\n            // 例如：假设响应是纯文本URL\n            uploadPicData = { url: uploadPicRes.data };\n            console.log('【调试】使用纯文本解析响应:', uploadPicData);\n          }\n          \n          console.log('【调试】uploadPicData解析后:', uploadPicData);\n          \n          // 从响应中获取imageUrl（支持多种响应结构）\n          const imageUrl = \n            uploadPicData.data?.url || \n            uploadPicData.url || \n            uploadPicData?.data || \n            uploadPicRes.data;\n          \n          if (!imageUrl) {\n            throw new Error('未获取到图片URL');\n          }\n          \n          console.log('【调试】imageUrl:', imageUrl);\n          this.ossUrl = imageUrl;\n          \n          // 2. 上传图片相关信息到数据库\n          const uploadInfoRes = await uni.request({\n            url: 'https://larsc.hzau.edu.cn/prod-api/plant-disease/uploadInfo',\n            method: 'POST',\n            header: {\n              'Authorization': `Bearer ${token}`,\n              'Content-Type': 'application/json'\n            },\n            data: {\n              imageUrl,\n              imageNum: this.imgId,\n              longitude: this.longitude,\n              latitude: this.latitude,\n              branchTaskId,\n              blockId: this.blockId,\n              blockNum: this.blockNum, // 使用已初始化的blockNum\n              diseaseType: this.diseaseTypes[this.diseaseIndex],\n              diseaseLevel: this.diseaseLevel,\n              remark: combinedRemark // 使用拼接后的备注\n            }\n          });\n          console.log('【调试】uploadInfoRes响应:', uploadInfoRes);\n          \n          uni.hideLoading();\n          \n          if (uploadInfoRes.statusCode === 200 && uploadInfoRes.data.code === 200) {\n            uni.showToast({ title: '上传成功', icon: 'success' });\n            \n            // 更新图片计数器\n            const counterKey = `imageCounter_${this.blockNum}`;\n            this.imageCounter++;\n            uni.setStorageSync(counterKey, this.imageCounter);\n            \n            // 生成下一个图片编号\n            this.imgId = `${this.blockNum}_${this.imageCounter.toString().padStart(3, '0')}`;\n            \n            setTimeout(() => {\n              uni.navigateBack();\n            }, 1500);\n          } else {\n            throw new Error(uploadInfoRes.data.msg || '上传图片信息失败');\n          }\n        } catch (parseError) {\n          console.error('【错误】解析图片响应失败:', parseError);\n          throw new Error('解析图片响应失败');\n        }\n      } catch (error) {\n        uni.hideLoading();\n        const errorMsg = error.message || '上传失败';\n        uni.showToast({ \n          title: `上传失败: ${errorMsg}`, \n          icon: 'none', \n          duration: 3000 \n        });\n        console.error('【错误】上传流程异常:', error);\n      }\n    },\n    \n    validateForm() {\n      if (!this.imageSrc) {\n        uni.showToast({ title: '请先拍摄或选择图片', icon: 'none' });\n        return false;\n      }\n      \n      if (!this.imgId) {\n        uni.showToast({ title: '图片编号生成失败', icon: 'none' });\n        return false;\n      }\n      \n      if (this.diseaseIndex === undefined || this.diseaseIndex < 0 || this.diseaseIndex >= this.diseaseTypes.length) {\n        uni.showToast({ title: '请选择有效的病害类型', icon: 'none' });\n        return false;\n      }\n      \n      if (!this.diseaseLevel || isNaN(parseInt(this.diseaseLevel)) || parseInt(this.diseaseLevel) < 1 || parseInt(this.diseaseLevel) > 9) {\n        uni.showToast({ title: '请输入有效的病害等级(1-9)', icon: 'none' });\n        return false;\n      }\n      \n      return true;\n    }\n  },\n  onUnload() {\n    // 不需要再存储全局数据\n  }\n};\n</script>\n\n<style scoped>\n.container {\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n  background-color: #f5f5f5;\n}\n.header {\n  padding: 15px;\n  background-color: #fff;\n  border-bottom: 1px solid #eee;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.title {\n  font-size: 18px;\n  font-weight: bold;\n}\n.connection-status {\n  font-size: 12px;\n  color: #666;\n}\n.camera-container {\n  flex: 1;\n  background-color: #000;\n  position: relative;\n}\n.camera {\n  width: 100%;\n  height: 100%;\n}\n/* 九宫格样式 */\n.grid-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  pointer-events: none;\n}\n.grid-line {\n  position: absolute;\n  background-color: rgba(255, 255, 255, 0.5);\n}\n.vertical-line-1 {\n  width: 1px;\n  height: 100%;\n  left: 33.33%;\n}\n.vertical-line-2 {\n  width: 1px;\n  height: 100%;\n  left: 66.66%;\n}\n.horizontal-line-1 {\n  width: 100%;\n  height: 1px;\n  top: 33.33%;\n}\n.horizontal-line-2 {\n  width: 100%;\n  height: 1px;\n  top: 66.66%;\n}\n.preview-container {\n  flex: 1;\n  background-color: #eee;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  padding: 10px;\n}\n.preview-image {\n  width: 100%;\n  height: 70%;\n  object-fit: contain;\n  margin-bottom: 10px;\n}\n.oss-url {\n  width: 100%;\n  padding: 8px;\n  background-color: #f0f0f0;\n  border-radius: 4px;\n  margin-bottom: 10px;\n  word-break: break-all;\n  font-size: 12px;\n}\n.upload-status {\n  width: 100%;\n  padding: 8px;\n  background-color: #e6f7ff;\n  border-radius: 4px;\n  font-size: 14px;\n  color: #1890ff;\n  text-align: center;\n}\n.button-area {\n  padding: 15px;\n  background-color: #fff;\n}\n.action-btn {\n  margin-bottom: 15px;\n  height: 45px;\n  border-radius: 8px;\n  font-size: 16px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.capture {\n  background-color: #07C160;\n  color: white;\n}\n.album {\n  background-color: #1989FA;\n  color: white;\n}\n.confirm {\n  background-color: #07C160;\n  color: white;\n}\n.retake {\n  background-color: #FF976A;\n  color: white;\n}\n.cancel {\n  background-color: #FF0000;\n  color: white;\n}\n.form-container {\n  margin-bottom: 20px;\n}\n.form-item {\n  display: flex;\n  align-items: center;\n  margin-bottom: 15px;\n}\n.label {\n  width: 80px;\n  font-size: 14px;\n  color: #666;\n}\n.input {\n  flex: 1;\n  height: 40px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  padding: 0 10px;\n  font-size: 14px;\n}\n.picker {\n  flex: 1;\n}\n.picker-text {\n  height: 40px;\n  line-height: 40px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  padding: 0 10px;\n  font-size: 14px;\n  color: #333;\n}\n</style>","import MiniProgramPage from 'C:/Users/25855/Desktop/狮山云瞳/狮山云瞳/狮山云瞳/狮山云瞳/pages/collect/collect.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;AAyGA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,YAAY;AAAA,MACZ,UAAU;AAAA,MACV,QAAQ;AAAA,MACR,cAAc;AAAA,MACd,QAAQ;AAAA,MACR,gBAAgB;AAAA,MAChB,WAAW;AAAA,MACX,UAAU;AAAA,MACV,cAAc,CAAC,OAAO,OAAO,IAAI;AAAA,MACjC,cAAc;AAAA,MACd,cAAc;AAAA,MACd,OAAO;AAAA,MACP,UAAU;AAAA;AAAA,MACV,QAAQ;AAAA;AAAA,MACR,mBAAmB,CAAE;AAAA;AAAA,MACrB,UAAU;AAAA;AAAA,MACV,cAAc;AAAA;AAAA,MACd,SAAS;AAAA;AAAA;EAEZ;AAAA,EACD,OAAO,SAAS;AACd,SAAK,SAAS,QAAQ,UAAU;AAChC,SAAK,YAAW;AAChB,SAAK,YAAW;AAAA,EACjB;AAAA,EACD,SAAS;AAAA,IACP,cAAc;AACZ,WAAK,aAAa;AAClB,WAAK,WAAW;AAChB,WAAK,SAAS;AACd,WAAK,eAAe;AAAA,IACrB;AAAA,IAED,YAAY;AACV,YAAM,MAAMA,oBAAI;AAChB,UAAI,UAAU;AAAA,QACZ,SAAS;AAAA,QACT,SAAS,CAAC,QAAQ;AAChB,eAAK,WAAW,IAAI;AACpB,eAAK,aAAa;AAClB,eAAK,YAAW;AAAA,QACjB;AAAA,QACD,MAAM,CAAC,QAAQ;AACbA,wBAAc,MAAA,MAAA,SAAA,oCAAA,SAAS,GAAG;AAC1BA,wBAAG,MAAC,UAAU,EAAE,OAAO,YAAY,MAAM,OAAK,CAAG;AAAA,QACnD;AAAA,MACF,CAAC;AAAA,IACF;AAAA,IAED,eAAe;AACb,WAAK,aAAa;AAClBA,oBAAG,MAAC,aAAY;AAAA,IACjB;AAAA,IAED,cAAc;AACZ,WAAK,YAAW;AAAA,IACjB;AAAA,IAED,cAAc;AACZ,WAAK,iBAAiB;AACtBA,oBAAAA,MAAI,YAAY;AAAA,QACd,MAAM;AAAA,QACN,UAAU;AAAA,QACV,SAAS,CAAC,QAAQ;AAChB,eAAK,YAAY,IAAI,UAAU,QAAQ,CAAC;AACxC,eAAK,WAAW,IAAI,SAAS,QAAQ,CAAC;AACtC,eAAK,iBAAiB;AAAA,QACvB;AAAA,QACD,MAAM,CAAC,QAAQ;AACbA,wBAAA,MAAA,MAAA,SAAA,oCAAc,WAAW,GAAG;AAC5B,eAAK,iBAAiB;AACtB,eAAK,YAAY;AACjB,eAAK,WAAW;AAChB,eAAK,SAAS;AAAA,QAChB;AAAA,MACF,CAAC;AAAA,IACF;AAAA,IAED,gBAAgB,GAAG;AACjB,YAAM,gBAAgB,EAAE,OAAO;AAC/B,UAAI,iBAAiB,KAAK,gBAAgB,KAAK,aAAa,QAAQ;AAClE,aAAK,eAAe;AAAA,aACf;AACLA,sBAAA,MAAA,MAAA,QAAA,oCAAa,cAAc,aAAa;AACxC,aAAK,eAAe;AAAA,MACtB;AAAA,IACD;AAAA,IAED,kBAAkB;AAChBA,oBAAAA,MAAI,YAAY;AAAA,QACd,OAAO;AAAA,QACP,SAAS,CAAC,QAAQ;AAChB,eAAK,WAAW,IAAI,cAAc,CAAC;AACnC,eAAK,YAAW;AAChB,eAAK,YAAW;AAAA,QAClB;AAAA,MACF,CAAC;AAAA,IACF;AAAA;AAAA,IAGD,cAAc;AAEZ,WAAK,UAAUA,cAAG,MAAC,eAAe,SAAS,KAAK;AAChD,WAAK,WAAWA,cAAG,MAAC,eAAe,UAAU,KAAK;AAElD,UAAI,CAAC,KAAK,YAAY,KAAK,aAAa,WAAW;AACjD,aAAK,QAAQ;AACb;AAAA,MACF;AAGA,YAAM,aAAa,gBAAgB,KAAK,QAAQ;AAChD,WAAK,eAAeA,cAAG,MAAC,eAAe,UAAU,KAAK;AAGtD,WAAK,QAAQ,GAAG,KAAK,QAAQ,IAAI,KAAK,aAAa,SAAU,EAAC,SAAS,GAAG,GAAG,CAAC;AAAA,IAC/E;AAAA;AAAA,IAGD,MAAM,eAAe;;AACnB,UAAI,CAAC,KAAK,aAAY;AAAI;AAE1B,UAAI;AACFA,sBAAG,MAAC,YAAY,EAAE,OAAO,YAAY,MAAM,KAAG,CAAG;AAEjD,cAAM,QAAQA,cAAG,MAAC,eAAe,OAAO,KAAK;AAC7CA,sBAAA,MAAA,MAAA,OAAA,oCAAY,cAAc,KAAK;AAE/B,cAAM,eAAeA,cAAAA,MAAI,eAAe,cAAc;AACtDA,sBAAY,MAAA,MAAA,OAAA,oCAAA,qBAAqB,YAAY;AAG7C,aAAK,UAAUA,cAAG,MAAC,eAAe,SAAS,KAAK;AAChDA,sBAAA,MAAA,MAAA,OAAA,oCAAY,gBAAgB,KAAK,OAAO;AAExC,cAAM,YAAYA,cAAAA,MAAI,eAAe,WAAW;AAChDA,sBAAA,MAAA,MAAA,OAAA,oCAAY,kBAAkB,SAAS;AAGvC,cAAM,iBAAiB,GAAG,KAAK,YAAY,EAAE,IAAI,KAAK,UAAU,EAAE;AAGlE,cAAM,eAAe,MAAMA,cAAG,MAAC,WAAW;AAAA,UACxC,KAAK;AAAA,UACL,UAAU,KAAK;AAAA,UACf,MAAM;AAAA,UACN,QAAQ;AAAA,YACN,iBAAiB;AAAA,UACnB;AAAA,QACF,CAAC;AACDA,6EAAY,yBAAyB,YAAY;AAEjD,YAAI,aAAa,eAAe,KAAK;AACnC,gBAAM,IAAI,MAAM,eAAe,aAAa,UAAU,EAAE;AAAA,QAC1D;AACA,YAAI;AACF,cAAI,gBAAgB,CAAA;AAGpB,cAAI;AACF,4BAAgB,KAAK,MAAM,aAAa,IAAI;AAAA,UAC9C,SAAS,UAAU;AAGjB,4BAAgB,EAAE,KAAK,aAAa;AACpCA,0BAAY,MAAA,MAAA,OAAA,oCAAA,kBAAkB,aAAa;AAAA,UAC7C;AAEAA,wBAAY,MAAA,MAAA,OAAA,oCAAA,yBAAyB,aAAa;AAGlD,gBAAM,aACJ,mBAAc,SAAd,mBAAoB,QACpB,cAAc,QACd,+CAAe,SACf,aAAa;AAEf,cAAI,CAAC,UAAU;AACb,kBAAM,IAAI,MAAM,WAAW;AAAA,UAC7B;AAEAA,wBAAA,MAAA,MAAA,OAAA,oCAAY,iBAAiB,QAAQ;AACrC,eAAK,SAAS;AAGd,gBAAM,gBAAgB,MAAMA,cAAG,MAAC,QAAQ;AAAA,YACtC,KAAK;AAAA,YACL,QAAQ;AAAA,YACR,QAAQ;AAAA,cACN,iBAAiB,UAAU,KAAK;AAAA,cAChC,gBAAgB;AAAA,YACjB;AAAA,YACD,MAAM;AAAA,cACJ;AAAA,cACA,UAAU,KAAK;AAAA,cACf,WAAW,KAAK;AAAA,cAChB,UAAU,KAAK;AAAA,cACf;AAAA,cACA,SAAS,KAAK;AAAA,cACd,UAAU,KAAK;AAAA;AAAA,cACf,aAAa,KAAK,aAAa,KAAK,YAAY;AAAA,cAChD,cAAc,KAAK;AAAA,cACnB,QAAQ;AAAA;AAAA,YACV;AAAA,UACF,CAAC;AACDA,wBAAY,MAAA,MAAA,OAAA,oCAAA,wBAAwB,aAAa;AAEjDA,wBAAG,MAAC,YAAW;AAEf,cAAI,cAAc,eAAe,OAAO,cAAc,KAAK,SAAS,KAAK;AACvEA,0BAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,UAAQ,CAAG;AAGhD,kBAAM,aAAa,gBAAgB,KAAK,QAAQ;AAChD,iBAAK;AACLA,0BAAAA,MAAI,eAAe,YAAY,KAAK,YAAY;AAGhD,iBAAK,QAAQ,GAAG,KAAK,QAAQ,IAAI,KAAK,aAAa,SAAU,EAAC,SAAS,GAAG,GAAG,CAAC;AAE9E,uBAAW,MAAM;AACfA,4BAAG,MAAC,aAAY;AAAA,YACjB,GAAE,IAAI;AAAA,iBACF;AACL,kBAAM,IAAI,MAAM,cAAc,KAAK,OAAO,UAAU;AAAA,UACtD;AAAA,QACF,SAAS,YAAY;AACnBA,wBAAA,MAAA,MAAA,SAAA,oCAAc,iBAAiB,UAAU;AACzC,gBAAM,IAAI,MAAM,UAAU;AAAA,QAC5B;AAAA,MACA,SAAO,OAAO;AACdA,sBAAG,MAAC,YAAW;AACf,cAAM,WAAW,MAAM,WAAW;AAClCA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO,SAAS,QAAQ;AAAA,UACxB,MAAM;AAAA,UACN,UAAU;AAAA,QACZ,CAAC;AACDA,sBAAA,MAAA,MAAA,SAAA,oCAAc,eAAe,KAAK;AAAA,MACpC;AAAA,IACD;AAAA,IAED,eAAe;AACb,UAAI,CAAC,KAAK,UAAU;AAClBA,sBAAG,MAAC,UAAU,EAAE,OAAO,aAAa,MAAM,OAAK,CAAG;AAClD,eAAO;AAAA,MACT;AAEA,UAAI,CAAC,KAAK,OAAO;AACfA,sBAAG,MAAC,UAAU,EAAE,OAAO,YAAY,MAAM,OAAK,CAAG;AACjD,eAAO;AAAA,MACT;AAEA,UAAI,KAAK,iBAAiB,UAAa,KAAK,eAAe,KAAK,KAAK,gBAAgB,KAAK,aAAa,QAAQ;AAC7GA,sBAAG,MAAC,UAAU,EAAE,OAAO,cAAc,MAAM,OAAO,CAAC;AACnD,eAAO;AAAA,MACT;AAEA,UAAI,CAAC,KAAK,gBAAgB,MAAM,SAAS,KAAK,YAAY,CAAC,KAAK,SAAS,KAAK,YAAY,IAAI,KAAK,SAAS,KAAK,YAAY,IAAI,GAAG;AAClIA,sBAAG,MAAC,UAAU,EAAE,OAAO,mBAAmB,MAAM,OAAO,CAAC;AACxD,eAAO;AAAA,MACT;AAEA,aAAO;AAAA,IACT;AAAA,EACD;AAAA,EACD,WAAW;AAAA,EAEX;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxXA,GAAG,WAAW,eAAe;"}